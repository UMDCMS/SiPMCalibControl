<!DOCTYPE html>
<html>

<head>

  <!--css related stuff-->
  <link rel="stylesheet" href="{{url_for('static',filename='style.css')}}">

  <!--External Javascript-->
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>

  <script src="{{url_for('static', filename='js/external/plotly-1.51.1.min.js')}}"></script>

  <!--Custom Javascript-->
  <script src="{{url_for('static',filename='js/main.js')}}"></script>
  <script src="{{url_for('static',filename='js/action.js')}}"></script>
  <script src="{{url_for('static',filename='js/graphics.js')}}"></script>
  <script src="{{url_for('static',filename='js/input_sync.js')}}"></script>
  <script src="{{url_for('static',filename='js/monitor_style.js')}}"></script>
  <script src="{{url_for('static',filename='js/monitor.js')}}"></script>
</head>

<body>

  <div id="column-container">
    <div id="main-column">
      <h2>Monitoring</h2>

      <div class="tab invisible" id="user-action">
        <div class="tab-title">
          <span>USER ACTION REQUIRED</span>
          <i class="fa fa=fa-angle-left"></i>
        </div>
        <div class="tab-content" id="user-action-content">
          <div id="user-action-msg">
          </div><br />

          <button id="user-action-complete">Completed</button>
        </div>

      </div>

      <div class="tab" id="real-time">
        <div class="tab-title">
          <span>System Status</span>
          <i class="fa fa=fa-angle-left"></i>
        </div>
        <div class="tab-content">
          <div class=time-container>
            <div id="up-time"></div>
            <div id="up-time-since"></div>
          </div>

          <div class="legend">
            <div class="progress-complete">Complete</div>
            <div class="progress-running">Running</div>
            <div class="progress-error">Error</div>
          </div>

          <div class="input-align" id="bar-container">
            <div class="input-row" id="session-progress">
              <span class="input-name">Session Progress</span>
              <div class="input-unit progress-bar-container">
                <div class="progress-complete"></div>
                <div class="progress-running"></div>
                <div class="progress-error"></div>
              </div>
            </div>
            <div class="input-row" id="command-progress">
              <span class="input-name">Command progress</span>
              <div class="input-unit progress-bar-container">
                <div class="progress-complete" style="width:50%"></div>
              </div>
            </div>
          </div>


          <div id="display-message-container">
            <p id="display-message"></p>
          </div>
          <div class="monitor-plot-container">
            <div class="plot" id="temperature-plot">
            </div>
            <div class="plot" id="voltage-plot">
            </div>
          </div>
        </div>
      </div>

      <div class="tab" id="tile-layout">
        <div class="tab-title">
          <span>Tile Layout</span>
          <i class="fa fa=fa-angle-left"></i>
        </div>
        <div class="tab-content">



          <div class="column-container">
            <div class="left-column">
              <div class="chip-progress-legend">
                <div class="left-limit">0%</div>
                <div class="middle-limit">50%</div>
                <div class="right-limit">100%</div>
              </div>
              <div class="tilegrid" id="tile-layout-grid"></div>
            </div>

            <div class="right-column">
              <div id="single-chip-summary"></div>
            </div>

          </div>
        </div>
      </div>

    </div>


    <div id="action-column">
      <h2>Action</h2>

      <div class="tab user-action" id="system-calib">
        <div class="tab-title">
          <span>System calibrations</span>
          <i class="fa fa=fa-angle-left"></i>
        </div>
        <div class="tab-content">
          <div class="input-align">
            <div class="input-row">
              <span class="input-name">Board type</span>
              <input type="radio" name="system-calib-boardtype" value="reference_mock" />
              <span class="input-units">Mock reference</span>
            </div>
            <div class="input-row">
              <span class="input-name"></span>
              <input type="radio" name="system-calib-boardtype" value="dummy" />
              <span class="input-units">Dummy</span>
            </div>
          </div>
          <div class="button-container">
            <button id="run-system-calibration">Run system calibration</button>
          </div>
          <div id="system-calib-exist">

          </div>
        </div>
      </div>

      <div class="tab user-action" id="standard-calib">
        <div class="tab-title">
          <span>Standard calibrations</span>
          <i class="fa fa=fa-angle-left"></i>
        </div>
        <div class="tab-content">
          <div class="input-align">
            <div class="input-row">
              <span class="input-name">Board ID</span>
              <input type="text" id="std-calibration-boardid" />
            </div>
          </div>
          <div class="input-align">
            <div class="input-row">
              <span class="input-name">Boardtype</span>
              <input type="radio" name="std-calibration-boardtype" value="Tileboard_mock" />
              <span class="input-units">Mock 64 chip Tileboard</span>
            </div>
            <div class="input-row">
              <span class="input-name"></span>
              <input type="radio" name="std-calibration-boardtype" value="Tileboard_dummy" />
              <span class="input-units">Dummy</span>
            </div>
          </div>
          <div class="input-align" id="reference-system-calibration">
            <div class="input-row">
              <span class="input-name">Reference</span>
              <input type="radio" name="ref-calibration" value="summary_MOCK_20191004" />
              <span class="input-units">MOCK_20191004</span>
            </div>
            <div class="input-row">
              <span class="input-name"></span>
              <input type="radio" name="ref-calibration" value="summary_MOCK_20191004" />
              <span class="input-units">MOCK_20191004</span>
            </div>
          </div>
          <div class="button-container">
            <button id="run-std-calibration">Run Tileboard calibration</button>
          </div>
        </div>
      </div>

      <div class="tab expert-action" id="picoscope">
        <div class="tab-title">
          <span>Scope settings (EXP ONLY)</span>
          <i class="fa fa-angle-left"></i>
        </div>
        <div class="tab-content hidden">
          <table style="text-align:center;">
            <tr>
              <td>A</td>
              <td>B</td>
              <td>Ext.</td>
            </tr>
            <tr>
              <td><input type="radio" name="trigger-channel" id="trigger-channel-A" /></td>
              <td><input type="radio" name="trigger-channel" id="trigger-channel-B" /></td>
              <td><input type="radio" name="trigger-channel" id="trigger-channel-EXT" /></td>
              <td class="input-align">
                <div class="input-row">
                  <span class="input-name">Trig.</span>
                  <input type="text" id="trigger-level-text" />
                  <span class="setting-unit">ADC</span>
                  <span id="trigger-level-converted"></span>
                  <input type="range" min="-128" max="127" id="trigger-level-range" />
                </div>
              </td>
            <tr>
              <td>
                <input type="range" class="vertical" orient="vertical" id="channel-a-range" min="3" max="10"
                  value={{scope_channel_a_range}} /><br>
                <div id="channel-a-range-value">20V</div>
              </td>
              <td>
                <input type="range" class="vertical" orient="vertical" id="channel-b-range" min="3" max="10"
                  value={{scope_channel_a_range}} /><br>
                <div id="channel-b-range-value">20V</div>
              </td>
              <td></td>
              <td class="input-align">

                <div class="input-row">
                  <span class="input-name">Trig. dir.</span>
                  <span class="input-unit">
                    <input type="radio" name="trigger_direction" id="trigger_direction_up">
                    <input type="radio" name="trigger_direction" id="trigger_direction_down">
                    <input type="radio" name="trigger_direction" id="trigger_direction_both">
                    <br>up/down/both
                </div>
                <p></p>


                <div class="input-row">
                  <span class="input-name">Delay</span>
                  <input type="text" id="trigger-delay" />
                  <span class="input-unit">ns</span>
                </div>
                <div class="input-row">
                  <span class="input-name">Pre-samp.</span>
                  <input type="text" id="trigger-presample" />
                  <span class="input-unit">-</span>
                </div>
                <div class="input-row">
                  <span class="input-name">Post-samp</span>
                  <input type="text" id="trigger-postsample" />
                  <span class="input-unit">-</span>
                </div>
                <div class="input-row">
                  <span class="input-name">Num. blocks</span>
                  <input type="text" id="trigger-blocksize" />
                  <span class="input-unit">-</span>
                </div>
              </td>
            </tr>
          </table>
          <div class="button-container">
            <button id="picoscope_undo">Clear</button>
            <button id="picoscope_update">Update</button>
          </div>
        </div>

      </div>

      <div class="tab expert-action" id="imaging-settings">
        <div class="tab-title">
          <span>Image processing (EXP ONLY)</span>
          <i class="fa fa-angle-left"></i>
        </div>
        <div class="tab-content hidden">
          <div class="input-align">
            <div class="input-row">
              <span class="input-name">Threshold</span>
              <input type="text" id="image-threshold-text" />
              <span class="input-unit"></span>
              <input type="range" min="0" max="255" id="image-threshold-range" />
            </div>
            <div class="input-row">
              <span class="input-name">Blur</span>
              <input type="text" id="image-blur-text" />
              <span class="input-unit">Pixels</span>
              <input type="range" min="0" max="20" id="image-blur-range" />
            </div>
            <div class="input-row">
              <span class="input-name">Luminosity</span>
              <input type="text" id="image-lumi-text" />
              <span class="input-unit">Pixels</span>
              <input type="range" min="0" max="255" id="image-lumi-range" />
            </div>
            <div class="input-row">
              <span class="input-name">Min. Size</span>
              <input type="text" id="image-size-text" />
              <span class="input-unit">Pixels</span>
              <input type="range" min="0" max="1000" id="image-size-range" />
            </div>
            <div class="input-row">
              <span class="input-name">Max Ratio</span>
              <input type="text" id="image-ratio-text" />
              <span class="input-unit">%</span>
              <input type="range" min="100" max="500" id="image-ratio-range" />
            </div>
            <div class="input-row">
              <span class="input-name">Poly rang.</span>
              <input type="text" id="image-poly-text" />
              <span class="input-unit"></span>
              <input type="range" min="0" max="100" id="image-poly-range" />
            </div>
          </div>

          <div class="button-container">
            <button id="image-setting-clear">Clear</button>
            <button id="image-setting-update">Update</button>
          </div>
        </div>
      </div>

      <div class="tab expert-action" id="device-settings">
        <div class="tab-title">
          <span>Device settings (EXP ONLY)</span>
          <i class="fa fa-angle-left"></i>
        </div>
        <div class="tab-content hidden">
          <div class="input-align">
            <div class="input-row">
              <span class="input-name">3D Printer</span>
              <input type="text" id="printer-dev" />
            </div>
            <div class="input-row">
              <span class="input-name">Camera</span>
              <input type="text" id="camera-dev" />
            </div>
            <div class="input-row">
              <span class="input-name">Scope</span>
              <input type="text" id="scope-dev" />
            </div>
          </div>
        </div>
      </div>

      <div class="tab expert-action" id="rawcmd">
        <div class="tab-title">
          <span>Direct Command (EXP ONLY)</span>
          <i class="fa fa-angle-left"></i>
        </div>
        <div class="tab-content hidden">
          <input type="text" id="raw-cmd-input-text" />
          <button id="raw-cmd-input">Run</button>
        </div>
      </div>



    </div>
  </div>
</body>

</html>